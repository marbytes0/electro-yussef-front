<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Connexion | Electro Youssef</title>
    <link rel="icon" type="image/svg+xml" href="img/favicon.svg">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
    <link rel="stylesheet" href="CSS/style.css">
    <link rel="stylesheet" href="CSS/components.css">
    <link rel="stylesheet" href="CSS/pages.css">
</head>
<body>
    <div class="cart-overlay" onclick="open_close_cart()"></div>
    <div class="cart">
        <div class="top_cart">
            <h3>Panier : <span class="Count_item_cart">0</span></h3>
            <span onclick="open_close_cart()" class="close_cart"><i class="fa-regular fa-circle-xmark"></i></span>
        </div>
        <div class="items_in_cart" id="cart_items"></div>
        <div class="bottom_cart">
            <div class="total">
                <p>Sous-total</p>
                <p class="price_cart_toral">0DH</p>
            </div>
            <div class="button_cart">
                <a href="checkout.html" class="btn_cart btn">Commander</a>
                <span onclick="open_close_cart()" class="btn_cart trans_bg btn">Continuer mes achats</span>
            </div>
        </div>
    </div>

    <header>
        <div class="top_header">
            <div class="container">
                <a href="index.html" class="logo"><img src="img/electro-logo.png" alt="Electro Youssef"></a>
                <form action="search.html" method="GET" class="search_box">
                    <div class="select_box">
                        <select id="searchCategory" name="category">
                            <option value="">Toutes les catégories</option>
                        </select>
                    </div>
                    <input type="text" name="q" id="search" placeholder="Rechercher des produits" required>
                    <button type="submit"><i class="fa-solid fa-magnifying-glass"></i></button>
                </form>
                <div class="header_icons">
                    <div class="icon">
                        <a href="wishlist.html">
                            <i class="fa-regular fa-heart"></i>
                            <span class="count count_favourite">0</span>
                        </a>
                    </div>
                    <div onclick="open_close_cart()" class="icon">
                        <i class="fa-solid fa-cart-shopping"></i>
                        <span class="count count_item_header">0</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="bottom_header">
            <div class="container">
                <nav class="nav">
                    <span onclick="open_Menu()" class="open_menu"><i class="fa-solid fa-bars"></i></span>
                    <div class="menu-overlay" onclick="open_Menu()"></div>
                    <ul class="nav_links">
                        <span onclick="open_Menu()" class="close_menu"><i class="fa-regular fa-circle-xmark"></i></span>
                        <li><a href="index.html"><i class="fa-solid fa-house"></i> Accueil</a></li>
                        <li><a href="products.html"><i class="fa-solid fa-shop"></i> Boutique</a></li>
                        <li><a href="about.html"><i class="fa-solid fa-circle-info"></i> À propos</a></li>
                        <li><a href="contact.html"><i class="fa-solid fa-envelope"></i> Contact</a></li>
                    </ul>
                </nav>
                <div class="login_signup btns"></div>
            </div>
        </div>
    </header>

    <div style="min-height:60vh;display:flex;align-items:center;justify-content:center;padding:40px 20px;background:#f9fafb;">
        <div style="width:100%;max-width:400px;">
            <!-- Card -->
            <div style="background:#fff;border-radius:16px;padding:32px;box-shadow:0 4px 20px rgba(0,0,0,0.08);">
                <!-- Header -->
                <div style="text-align:center;margin-bottom:28px;">
                    <div style="width:60px;height:60px;background:linear-gradient(135deg,#1e40af,#3b82f6);border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 16px;">
                        <i class="fa-solid fa-user" style="color:#fff;font-size:24px;"></i>
                    </div>
                    <h1 style="margin:0 0 8px 0;font-size:24px;color:#1f2937;font-weight:700;">Bon retour</h1>
                    <p style="margin:0;color:#6b7280;font-size:14px;">Connectez-vous à votre compte</p>
                </div>
                
                <!-- Form -->
                <form id="loginForm">
                    <div style="margin-bottom:20px;">
                        <label style="display:block;font-size:14px;font-weight:500;color:#374151;margin-bottom:6px;">Adresse email</label>
                        <div style="position:relative;">
                            <i class="fa-solid fa-envelope" style="position:absolute;left:14px;top:50%;transform:translateY(-50%);color:#9ca3af;font-size:14px;"></i>
                            <input type="email" id="email" required placeholder="votre@email.com" 
                                style="width:100%;padding:12px 14px 12px 42px;border:1px solid #e5e7eb;border-radius:10px;font-size:15px;outline:none;transition:border-color 0.2s,box-shadow 0.2s;box-sizing:border-box;"
                                onfocus="this.style.borderColor='#3b82f6';this.style.boxShadow='0 0 0 3px rgba(59,130,246,0.1)'"
                                onblur="this.style.borderColor='#e5e7eb';this.style.boxShadow='none'">
                        </div>
                    </div>
                    
                    <div style="margin-bottom:20px;">
                        <label style="display:block;font-size:14px;font-weight:500;color:#374151;margin-bottom:6px;">Mot de passe</label>
                        <div style="position:relative;">
                            <i class="fa-solid fa-lock" style="position:absolute;left:14px;top:50%;transform:translateY(-50%);color:#9ca3af;font-size:14px;"></i>
                            <input type="password" id="password" required placeholder="••••••••" 
                                style="width:100%;padding:12px 14px 12px 42px;border:1px solid #e5e7eb;border-radius:10px;font-size:15px;outline:none;transition:border-color 0.2s,box-shadow 0.2s;box-sizing:border-box;"
                                onfocus="this.style.borderColor='#3b82f6';this.style.boxShadow='0 0 0 3px rgba(59,130,246,0.1)'"
                                onblur="this.style.borderColor='#e5e7eb';this.style.boxShadow='none'">
                        </div>
                    </div>
                    
                    <div style="display:flex;align-items:center;margin-bottom:24px;">
                        <input type="checkbox" id="remember" style="width:16px;height:16px;accent-color:#3b82f6;cursor:pointer;">
                        <label for="remember" style="margin-left:8px;font-size:14px;color:#6b7280;cursor:pointer;">Se souvenir de moi</label>
                    </div>
                    
                    <button type="submit" id="submitBtn"
                        style="width:100%;padding:14px;background:linear-gradient(135deg,#1e40af,#3b82f6);color:#fff;border:none;border-radius:10px;font-size:15px;font-weight:600;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:8px;transition:transform 0.2s,box-shadow 0.2s;"
                        onmouseover="this.style.transform='translateY(-1px)';this.style.boxShadow='0 4px 12px rgba(59,130,246,0.4)'"
                        onmouseout="this.style.transform='translateY(0)';this.style.boxShadow='none'">
                        Se connecter <i class="fa-solid fa-arrow-right"></i>
                    </button>
                </form>
                
                <!-- Footer -->
                <div style="text-align:center;margin-top:24px;padding-top:20px;border-top:1px solid #f3f4f6;">
                    <p style="margin:0;font-size:14px;color:#6b7280;">
                        Pas encore de compte ? 
                        <a href="register.html" style="color:#3b82f6;text-decoration:none;font-weight:600;">Inscrivez-vous</a>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast -->
    <div id="toast" style="position:fixed;bottom:20px;left:50%;transform:translateX(-50%) translateY(100px);background:#ef4444;color:#fff;padding:12px 24px;border-radius:8px;font-size:14px;opacity:0;transition:all 0.3s;z-index:1000;"></div>

    <footer>
        <div class="container">
            <div class="big_row">
                <h2 class="footer-brand">Electro <span>Youssef</span></h2>
                <p>Votre boutique unique pour des produits de qualité à bon prix.</p>
            </div>
            <div class="row">
                <h4>Liens Rapides</h4>
                <div class="links">
                    <a href="products.html"><i class="fa-solid fa-caret-right"></i> Boutique</a>
                    <a href="about.html"><i class="fa-solid fa-caret-right"></i> À propos</a>
                    <a href="contact.html"><i class="fa-solid fa-caret-right"></i> Contact</a>
                </div>
            </div>
        </div>
        <div class="bottom_footer">
            <div class="container">
                <p>&copy; <span>Electro Youssef.</span> Tous droits réservés.</p>
            </div>
        </div>
    </footer>

    <script src="JS/config.js"></script>
    <script src="JS/api.js"></script>
    <script src="JS/auth.js"></script>
    <script src="JS/cart.js"></script>
    <script src="JS/wishlist.js"></script>
    <script src="JS/ui.js"></script>
    <script src="JS/main.js"></script>
    <script>
        function showToast(message, type = 'error') {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.style.background = type === 'success' ? '#10b981' : '#ef4444';
            toast.style.opacity = '1';
            toast.style.transform = 'translateX(-50%) translateY(0)';
            setTimeout(() => {
                toast.style.opacity = '0';
                toast.style.transform = 'translateX(-50%) translateY(100px)';
            }, 3000);
        }

        document.getElementById('loginForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const btn = document.getElementById('submitBtn');
            
            btn.disabled = true;
            btn.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i> Connexion...';
            
            const result = await auth.login(email, password);
            
            if (result.success) {
                showToast('Connexion réussie !', 'success');
                setTimeout(() => window.location.href = 'index.html', 1000);
            } else {
                btn.disabled = false;
                btn.innerHTML = 'Se connecter <i class="fa-solid fa-arrow-right"></i>';
                showToast(result.message || 'Email ou mot de passe incorrect');
            }
        });
    </script>
</body>
</html>